<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>轮播图</title>
		<link rel="stylesheet" href="css/bootstrap.css" />
		<script src="js/vue.js"></script>
	</head>
	<body>
		<div id="app" class="container">
			<banner :my-data="banner1"></banner>
		</div>
		<template id="banner">
			<div class="carousel slide" data-ride="carousel" @mouseover="over" @mouseout="out">
			  <ol class="carousel-indicators">
			    <li v-for="(item,index) in myData" :class="{active : index == num % myData.length}"></li>
			  </ol>
			  <div class="carousel-inner" role="listbox">
			    <div class="item" v-for="(item,index) in myData" :class="{active : index == num % myData.length}">
			      <img :src="item" width="100%" alt="图片">
			    </div>
			  </div>
			 <btn :btn-data="myData" :btn-num="num" @send="get"></btn>
			</div>
		</template>
		<template id="btn">
			<div>
			  <a class="left carousel-control" href="#" role="button" data-slide="prev" @click="prev">
			    <span class="glyphicon glyphicon-chevron-left" aria-hidden="true"></span>
			    <span class="sr-only">Previous</span>
			  </a>
			  <a class="right carousel-control" href="#" role="button" data-slide="next" @click="next">
			    <span class="glyphicon glyphicon-chevron-right" aria-hidden="true"></span>
			    <span class="sr-only">Next</span>
			  </a>
			</div>
		</template>
		<script>
			var btn = {
				template : "#btn",
				props : ["btnData","btnNum"],
				data (){
					return {
						num : this.btnNum,
					}
				},
				methods : {
					prev (){
						this.num = this.num <= 0 ? this.btnData.length - 1 : -- this.num;
						this.$emit('send',this.num)
					},
					next (){
						this.num ++;
						this.$emit('send',this.num)
					}
				},
			};
			var banner = {
				template : "#banner",
				props : ['myData'],
				data (){
					return {
						num : 0,
						timer : null,
					}
				},
				methods : {
					get (data){
						this.num = data;
					},
					over (){
						clearInterval(this.timer)
					},
					out (){
						this.move()
					},
					move (){
						this.timer = setInterval(() => {
							this.num ++;
						},2000);
					}
				},
				created (){
					this.move();
				},
				components : {
					btn,
				}
			};
			var vm = new Vue({
				el : "#app",
				data : {
					banner1 : ["img/image01.png","img/image04.png","img/image05.png","img/image07.png"],
				},
				components : {
					banner,
				}
			});
		</script>
	</body>
</html>
