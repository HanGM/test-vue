<!DOCTYPE html>
<html>
	<head>
		<meta charset="UTF-8">
		<title>动画封装</title>
		<style type="text/css">
			.father{
				width: 400px;
				height: 400px;
				border: 1px solid black;
			}
			.box{
				float: left;
				width: 100px;
				height: 100px;
				background: red;
			}
			.main{
				float: left;
				width: 100px;
				height: 100px;
				background: blue;
			}
		</style>
		<script src="common.js"></script>
	</head>
	<body>
		<button class="btn">点击运动</button>
		<div class="father">
			<div class="box"></div>
			<div class="main"></div>
		</div>
		<script>
			var btn=document.getElementsByClassName('btn')[0];
			var box=document.getElementsByClassName('box')[0];
			//队列动画，执行完第一个接着执行下一个
			btn.onclick=function(){
				animate(box,{'marginLeft':200},500,function(){
					animate(box,{'marginTop':200},500,function(){
						animate(box,{'height':200},600)
					});
				});
			}
//			function animate(el,obj,time,callback){
//				for(var i in obj){
//					var attr=i;
//					var target=obj[i];
//				}
//				var start=parseInt(getComputedStyle(el,null)[attr]);
//				var t=16;//每次执行的时间
//				var step=(target-start)/(time/t);//元素每次变化的量
//				var timer = setInterval(function(){
//					if(step>0&&start>=(target-step)||step<0&&start<=(target-step)){
//						clearInterval(timer);//最后一步之前关闭定时器
//						el.style[attr]=target+'px';//同时直接移动到目标位置
//						if(callback) callback();//是否传入回调函数，是则执行回调函数
//					}else{
//						start+=step;//元素向目标位置移动
//						el.style[attr]=start+'px';
//					}
//				},16);
//			}
			/*function animate(el,obj,time){
				for(var i in obj){
					attr=i;
					target=obj[i];
				}
				var start=parseInt(getComputedStyle(el,null)[attr]);
				var t=16;
				var step=(target-start)/(time/t);
				var timer = setInterval(function(){
					if(step>0&&start>=(target-step)||step<0&&start<=(target-step)){
						clearInterval(timer);//最后一步之前关闭定时器
						el.style[attr]=target+'px';//同时直接移动到目标位置
					}else{
						start+=step;
						el.style[attr]=start+'px';
					}
				},16);
			}*/
			/*btn.onclick=function(){
				animate(box,'marginLeft',200,500);
			}
			function animate(el,attr,target,time){
				var start=parseInt(getComputedStyle(el,null)[attr]);
				var t=16;
				var step=(target-start)/(time/t);
				var timer = setInterval(function(){
					step=target>start?step:-Math.abs(step);//step输入必须为正值
					if(step>0&&start>=(target-step)||step<0&&start<=(target-step)){
						clearInterval(timer);//最后一步之前关闭定时器
						el.style[attr]=target+'px';//同时直接移动到目标位置
					}else{
						start+=step;
						el.style.marginLeft=start+'px';
					}
				},16);
			}*/
			
		/*	btn.onclick=function(){
				animate(box,11,'marginLeft',200);
			}
			function animate(el,step,attr,target){
				var start=parseInt(getComputedStyle(el,null)[attr]);
				var time = setInterval(function(){
					step=target>start?step:-Math.abs(step);//step输入必须为正值
					if(step>0&&start>=(target-step)||step<0&&start<=(target-step)){
						clearInterval(time);//最后一步之前关闭定时器
						el.style[attr]=target+'px';//同时直接移动到目标位置
					}else{
						start+=step;
						el.style.marginLeft=start+'px';
					}
				},16);
			}*/
			
			/*
			btn.onclick=function(){
				animate(11,200);
			}
			function animate(step,target){
				var time = setInterval(function(){
					step=target>num?step:-Math.abs(step);//step输入必须为正值
					if(step>0&&num>=(target-step)||step<0&&num<=(target-step)){
						clearInterval(time);//最后一步之前关闭定时器
						box.style.marginLeft=target+'px';//同时直接移动到目标位置
					}else{
						num+=step;
						box.style.marginLeft=num+'px';
					}
				},100);
			}*/
			/*function animate(step,target){
				var time=setInterval(function(){
					step=target>num?step:-Math.abs(step);// 当num=209时，step固定为负值
					if(step>0&&num>=target||step<0&&num<=target){
						clearInterval(time);//step为负且num=198时停止
						console.log(step);
					}else{
						num+=step;	
					}
					box.style.marginLeft=num+'px';
				},100);
			}*/
			
		</script>
	</body>
</html>
